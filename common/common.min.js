var com;!function(t){t.JTApplication=class{static init(){t.JTCommand.initialize(),t.JTSendPackage.initialize(),t.JTSingleManager.initialize()}}}(com||(com={})),function(t){class e{constructor(t){this._dataMap=null,this._name=null,e.localCache=window.localStorage,this.name=t}set name(t){this._name=t,e.localCache[t]?this._dataMap=JSON.parse(e.localCache[t]):(this._dataMap={},this.update())}setObject(t,e){this._dataMap[t]=e,this.update()}getObject(t){return this._dataMap[t]}hasKey(t){return t in this._dataMap}delete(t){this._dataMap[t]=null,delete this._dataMap[t],this.update()}update(){e.localCache.setItem(this._name,JSON.stringify(this._dataMap))}clean(){this._dataMap={},this.update()}recycle(){this.clean(),this._name=null}get dataMap(){return this._dataMap}}e.localCache=null,t.JTLocalCache=e}(com||(com={})),function(t){class e{static info(...t){let e="";for(var s=0;s<t.length;s++)e+=t[s];this.print(this.LOG_INFO,e)}static debug(...t){let e="";for(var s=0;s<t.length;s++)e+=JSON.stringify(t[s]);this.print(this.LOG_DEBUG,e)}static assert(t,...e){let s="";for(var i=0;i<e.length;i++)s+=e[i];if(!t)throw new Error(s)}static print(t,e){var s=new Date,i=s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+" >>>> ";console.log(t+i+e)}}e.LOG_INFO="[INFO] :",e.LOG_ASSET="[ASSET] :",e.LOG_DEBUG="[DEBUG] :",t.JTLogger=e}(com||(com={})),function(t){class e{}e.socketChannel=null,t.JTSession=e}(com||(com={})),function(t){class e{clone(){return(new e).update(this),this}update(t){for(var e=Object.keys(t),s=e.length,i=0;i<s;i++){var n=e[i];this.hasOwnProperty(n)&&(this[n]=t[n])}return this}recycle(){}}t.JTDataInfo=e}(com||(com={})),function(t){t.JTUserInfo=class extends t.JTDataInfo{constructor(){super(),this.name=null,this.age=0,this.weight=0}}}(com||(com={})),function(t){class e{constructor(){this._caller=null,this._method=null,this._args=null,this._once=!1}recycle(){this._caller=this._method=this._args=null}setTo(t,e,s,i=!1){return this._caller=t,this._method=e,this._args=s,this._once=i,this}run(){if(null==this._method)return null;var t=this._method.apply(this._caller,this._args);return this._once&&this.recover(),t}runWith(t){if(null==this._method)return null;if(null==t)var e=this._method.apply(this._caller,this._args);else e=this._args||t.unshift?this._args?this._method.apply(this._caller,this._args.concat(t)):this._method.apply(this._caller,t):this._method.call(this._caller,t);return this._once&&this.recover(),e}clear(){return this._method=this._args=this._caller=null,this}recover(){this.clear()}get caller(){return this._caller}get method(){return this._method}get once(){return this._once}static initialize(){this._pool||(this._pool=this._pool=t.JTPool.instance(e))}static create(t,e,s,i=!1){var n=this._pool.get();return n.setTo(t,e,s,i),n}static put(t){this._pool.put(t)}}e._pool=null,t.JTCommand=e}(com||(com={})),function(t){t.JTEventDispatcher=class{constructor(){this._eventMap=new Map,this._eventMap=new Map}recycle(){this.removeAll()}registerFunction(e,s,i,n){var h=this._eventMap.get(e);h?h.forEach(n=>{n&&n.method==s&&n.caller==i&&t.JTLogger.info("[JTFunctionManager.registerFunction] The key"+e+" function already registered ")}):(h=[],this._eventMap.set(e,h));var r=t.JTCommand.create(i,s,null,n);h.push(r)}execute(e,s){var i=this._eventMap.get(e);i?i.forEach(t=>{t&&t.runWith(s),t.once&&this.delete(i,t)}):t.JTLogger.info("[JTFunctionManager.execute] Cant find the function by key : "+e)}removeFunction(t,e,s){var i=this._eventMap.get(t);i&&i.forEach(t=>{t&&t.method==e&&t.caller==s&&this.delete(i,t)})}removeFunctions(t){var e=this._eventMap.get(t);e&&(e.forEach(t=>{t&&this.delete(e,t)}),this._eventMap.delete(t))}delete(e,s){var i=e.indexOf(s);e.splice(i,1).shift(),t.JTCommand.put(s)}removeAll(){this._eventMap.forEach((t,e)=>{this.removeFunctions(e),t.length=0}),this._eventMap.clear()}}}(com||(com={})),function(t){class e{static registerFunction(e,s,i,n){var h=this._eventMap.get(e);h?h.forEach(n=>{n&&n.method==s&&n.caller==i&&t.JTLogger.info("[JTFunctionManager.registerFunction] The key"+e+" function already registered ")}):(h=[],this._eventMap.set(e,h));var r=t.JTCommand.create(i,s,null,n);h.push(r)}static execute(e,s){var i=this._eventMap.get(e);i?i.forEach(t=>{t&&t.runWith(s),t.once&&this.delete(i,t)}):t.JTLogger.info("[JTFunctionManager.execute] Cant find the function by key : "+e)}static removeFunction(t,e,s){var i=this._eventMap.get(t);i&&i.forEach(t=>{t&&t.method==e&&t.caller==s&&this.delete(i,t)})}static removeFunctions(t){var e=this._eventMap.get(t);e&&(e.forEach(t=>{t&&this.delete(e,t)}),this._eventMap.delete(t))}static delete(e,s){var i=e.indexOf(s);e.splice(i,1).shift(),t.JTCommand.put(s)}}e._eventMap=new Map,t.JTFunctionManager=e}(com||(com={})),function(t){t.JTPopupManager=class{}}(com||(com={})),function(t){class e{static initialize(){this.instance||(this.instance=new e)}}e.instance=null,t.JTSingleManager=e}(com||(com={})),function(t){class e{constructor(t=null){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,t?(this._u8d_=new Uint8Array(t),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this._resizeBuffer(this._allocated_)}static getSystemEndian(){if(!e._sysEndian){var t=new ArrayBuffer(2);new DataView(t).setInt16(0,256,!0),e._sysEndian=256===new Int16Array(t)[0]?e.LITTLE_ENDIAN:e.BIG_ENDIAN}return e._sysEndian}get buffer(){var t=this._d_.buffer;return t.byteLength===this._length?t:t.slice(0,this._length)}get endian(){return this._xd_?e.LITTLE_ENDIAN:e.BIG_ENDIAN}set endian(t){this._xd_=t===e.LITTLE_ENDIAN}set length(t){this._allocated_<t?this._resizeBuffer(this._allocated_=Math.floor(Math.max(t,2*this._allocated_))):this._allocated_>t&&this._resizeBuffer(this._allocated_=t),this._length=t}get length(){return this._length}_resizeBuffer(t){try{var e=new Uint8Array(t);null!=this._u8d_&&(this._u8d_.length<=t?e.set(this._u8d_):e.set(this._u8d_.subarray(0,t))),this._u8d_=e,this._d_=new DataView(e.buffer)}catch(e){throw"Invalid typed array length:"+t}}getString(){return this.readString()}readString(){return this._rUTF(this.getUint16())}getFloat32Array(t,e){return this.readFloat32Array(t,e)}readFloat32Array(t,e){var s=t+e;s=s>this._length?this._length:s;var i=new Float32Array(this._d_.buffer.slice(t,s));return this._pos_=s,i}getUint8Array(t,e){return this.readUint8Array(t,e)}readUint8Array(t,e){var s=t+e;s=s>this._length?this._length:s;var i=new Uint8Array(this._d_.buffer.slice(t,s));return this._pos_=s,i}getInt16Array(t,e){return this.readInt16Array(t,e)}readInt16Array(t,e){var s=t+e;s=s>this._length?this._length:s;var i=new Int16Array(this._d_.buffer.slice(t,s));return this._pos_=s,i}getFloat32(){return this.readFloat32()}readFloat32(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var t=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,t}getFloat64(){return this.readFloat64()}readFloat64(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var t=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,t}writeFloat32(t){this._ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,t,this._xd_),this._pos_+=4}writeFloat64(t){this._ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,t,this._xd_),this._pos_+=8}getInt32(){return this.readInt32()}readInt32(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var t=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,t}getUint32(){return this.readUint32()}readUint32(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var t=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,t}writeInt32(t){this._ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,t,this._xd_),this._pos_+=4}writeUint32(t){this._ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,t,this._xd_),this._pos_+=4}getInt16(){return this.readInt16()}readInt16(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var t=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,t}getUint16(){return this.readUint16()}readUint16(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var t=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,t}writeUint16(t){this._ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,t,this._xd_),this._pos_+=2}writeInt16(t){this._ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,t,this._xd_),this._pos_+=2}getUint8(){return this.readUint8()}readUint8(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._u8d_[this._pos_++]}writeUint8(t){this._ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,t),this._pos_++}_getUInt8(t){return this._readUInt8(t)}_readUInt8(t){return this._d_.getUint8(t)}_getUint16(t){return this._readUint16(t)}_readUint16(t){return this._d_.getUint16(t,this._xd_)}_getMatrix(){return this._readMatrix()}_readMatrix(){return new t.JTMatrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())}_rUTF(t){var e,s,i=this._pos_+t,n=String.fromCharCode,h=this._u8d_,r=[],o=0;for(r.length=1e3;this._pos_<i;){if((e=h[this._pos_++])<128)0!=e&&(r[o++]=n(e));else if(e<224)r[o++]=n((63&e)<<6|127&h[this._pos_++]);else if(e<240)s=h[this._pos_++],r[o++]=n((31&e)<<12|(127&s)<<6|127&h[this._pos_++]);else{const t=(15&e)<<18|(127&(s=h[this._pos_++]))<<12|(127&h[this._pos_++])<<6|127&h[this._pos_++];if(t>=65536){const e=t-65536,s=55296|e>>10,i=56320|1023&e;r[o++]=n(s),r[o++]=n(i)}else r[o++]=n(t)}0}return r.length=o,r.join("")}getCustomString(t){return this.readCustomString(t)}readCustomString(t){for(var e,s="",i=0,n=String.fromCharCode,h=this._u8d_;t>0;)if((e=h[this._pos_])<128)s+=n(e),this._pos_++,t--;else for(i=e-128,this._pos_++,t-=i;i>0;)e=h[this._pos_++],s+=n(h[this._pos_++]<<8|e),i--;return s}get pos(){return this._pos_}set pos(t){this._pos_=t}get bytesAvailable(){return this._length-this._pos_}clear(){this._pos_=0,this.length=0}__getBuffer(){return this._d_.buffer}writeUTFBytes(t){for(var e=0,s=(t+="").length;e<s;e++){var i=t.charCodeAt(e);if(i<=127)this.writeByte(i);else if(i<=2047)this._ensureWrite(this._pos_+2),this._u8d_.set([192|i>>6,128|63&i],this._pos_),this._pos_+=2;else if(i>=55296&&i<=56319){e++;const s=t.charCodeAt(e);if(!Number.isNaN(s)&&s>=56320&&s<=57343){const t=64+(1023&i),e=1023&s,n=240|t>>8&63,h=128|t>>2&63,r=128|(3&t)<<4|e>>6&15,o=128|63&e;this._ensureWrite(this._pos_+4),this._u8d_.set([n,h,r,o],this._pos_),this._pos_+=4}}else i<=65535?(this._ensureWrite(this._pos_+3),this._u8d_.set([224|i>>12,128|i>>6&63,128|63&i],this._pos_),this._pos_+=3):(this._ensureWrite(this._pos_+4),this._u8d_.set([240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i],this._pos_),this._pos_+=4)}}writeUTFString(t){var e=this.pos;this.writeUint16(1),this.writeUTFBytes(t);var s=this.pos-e-2;this._d_.setUint16(e,s,this._xd_)}writeUTFString32(t){var e=this.pos;this.writeUint32(1),this.writeUTFBytes(t);var s=this.pos-e-4;this._d_.setUint32(e,s,this._xd_)}readUTFString(){return this.readUTFBytes(this.getUint16())}readUTFString32(){return this.readUTFBytes(this.getUint32())}getUTFString(){return this.readUTFString()}readUTFBytes(t=-1){if(0===t)return"";var e=this.bytesAvailable;if(t>e)throw"readUTFBytes error - Out of bounds";return t=t>0?t:e,this._rUTF(t)}getUTFBytes(t=-1){return this.readUTFBytes(t)}writeByte(t){this._ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,t),this._pos_+=1}readByte(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)}getByte(){return this.readByte()}_ensureWrite(t){this._length<t&&(this._length=t),this._allocated_<t&&(this.length=t)}writeArrayBuffer(t,e=0,s=0){if(e<0||s<0)throw"writeArrayBuffer error - Out of bounds";0==s&&(s=t.byteLength-e),this._ensureWrite(this._pos_+s);var i=new Uint8Array(t);this._u8d_.set(i.subarray(e,e+s),this._pos_),this._pos_+=s}readArrayBuffer(t){var e;return e=this._u8d_.buffer.slice(this._pos_,this._pos_+t),this._pos_=this._pos_+t,e}}e.BIG_ENDIAN="bigEndian",e.LITTLE_ENDIAN="littleEndian",e._sysEndian=null,t.JTBuffer=e}(com||(com={})),function(t){t.JTChannel=class extends t.JTEventDispatcher{constructor(t){super(),this._cls=null,this._port=0,this._host=null,this._channel=null,this._pipeline=null,this._encoder=null,this._decoder=null,this._idleState=null,this._cls=t}connect(t,e){this._host=t,this._port=e}reload(){this._encoder=this._pipeline.getAdapter(t.JTChannelAdapter.ENCODE),this._decoder=this._pipeline.getAdapter(t.JTChannelAdapter.DECODE),this._idleState=this._pipeline.getAdapter(t.JTChannelAdapter.IDLE)}bind(t){this._pipeline=t}get pipeline(){return this._pipeline}get host(){return this._host}get port(){return this._port}}}(com||(com={})),function(t){class e extends t.JTEventDispatcher{constructor(){super(),this._channel=null}get channel(){return this._channel}bind(t){this._channel=t}}e.ENCODE="encode",e.DECODE="decode",e.IDLE="idle",t.JTChannelAdapter=e}(com||(com={})),function(t){t.JTChannelPipeline=class extends t.JTEventDispatcher{constructor(){super(),this._channel=null,this._pipelineMap=null,this._pipelineMap=new Map}bind(t){return this._channel=t,this._channel.bind(this),this._channel}addAdapter(t,e){return e.bind(this._channel),e.channelActive(),this._pipelineMap.set(t,e),this}getAdapter(t){return this._pipelineMap.get(t)}luanch(t,e){this._channel.reload(),this._channel.connect(t,e)}}}(com||(com={})),function(t){t.JTHttpChannel=class extends t.JTChannel{flush(){throw new Error("Method not implemented.")}send(t){throw new Error("Method not implemented.")}}}(com||(com={})),function(t){class e{constructor(t=1,s=0,i=0,n=1,h=0,r=0,o=0){if(this._bTransform=!1,null!=e._createFun)return e._createFun(t,s,i,n,h,r,o);this.a=t,this.b=s,this.c=i,this.d=n,this.tx=h,this.ty=r,this._checkTransform()}identity(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this._bTransform=!1,this}_checkTransform(){return this._bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d}setTranslate(t,e){return this.tx=t,this.ty=e,this}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this._bTransform=!0,this}rotate(t){var e=Math.cos(t),s=Math.sin(t),i=this.a,n=this.c,h=this.tx;return this.a=i*e-this.b*s,this.b=i*s+this.b*e,this.c=n*e-this.d*s,this.d=n*s+this.d*e,this.tx=h*e-this.ty*s,this.ty=h*s+this.ty*e,this._bTransform=!0,this}skew(t,e){var s=Math.tan(t),i=Math.tan(e),n=this.a,h=this.b;return this.a+=i*this.c,this.b+=i*this.d,this.c+=s*n,this.d+=s*h,this}invertTransformPoint(t){var e=this.a,s=this.b,i=this.c,n=this.d,h=this.tx,r=e*n-s*i,o=n/r,a=-s/r,_=-i/r,c=e/r,l=(i*this.ty-n*h)/r,u=-(e*this.ty-s*h)/r;return t.setTo(o*t.x+_*t.y+l,a*t.x+c*t.y+u)}transformPoint(t){return t.setTo(this.a*t.x+this.c*t.y+this.tx,this.b*t.x+this.d*t.y+this.ty)}transformPointN(t){return t.setTo(this.a*t.x+this.c*t.y,this.b*t.x+this.d*t.y)}getScaleX(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)}getScaleY(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)}invert(){var t=this.a,e=this.b,s=this.c,i=this.d,n=this.tx,h=t*i-e*s;return this.a=i/h,this.b=-e/h,this.c=-s/h,this.d=t/h,this.tx=(s*this.ty-i*n)/h,this.ty=-(t*this.ty-e*n)/h,this}setTo(t,e,s,i,n,h){return this.a=t,this.b=e,this.c=s,this.d=i,this.tx=n,this.ty=h,this}concat(t){var e=this.a,s=this.c,i=this.tx;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d,this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}static mul(t,e,s){var i=t.a,n=t.b,h=t.c,r=t.d,o=t.tx,a=t.ty,_=e.a,c=e.b,l=e.c,u=e.d,d=e.tx,p=e.ty;return 0!==c||0!==l?(s.a=i*_+n*l,s.b=i*c+n*u,s.c=h*_+r*l,s.d=h*c+r*u,s.tx=_*o+l*a+d,s.ty=c*o+u*a+p):(s.a=i*_,s.b=n*u,s.c=h*_,s.d=r*u,s.tx=_*o+d,s.ty=u*a+p),s}static mul16(t,e,s){var i=t.a,n=t.b,h=t.c,r=t.d,o=t.tx,a=t.ty,_=e.a,c=e.b,l=e.c,u=e.d,d=e.tx,p=e.ty;return 0!==c||0!==l?(s[0]=i*_+n*l,s[1]=i*c+n*u,s[4]=h*_+r*l,s[5]=h*c+r*u,s[12]=_*o+l*a+d,s[13]=c*o+u*a+p):(s[0]=i*_,s[1]=n*u,s[4]=h*_,s[5]=r*u,s[12]=_*o+d,s[13]=u*a+p),s}scaleEx(t,e){var s=this.a,i=this.b,n=this.c,h=this.d;0!==i||0!==n?(this.a=t*s,this.b=t*i,this.c=e*n,this.d=e*h):(this.a=t*s,this.b=0*h,this.c=0*s,this.d=e*h),this._bTransform=!0}rotateEx(t){var e=Math.cos(t),s=Math.sin(t),i=this.a,n=this.b,h=this.c,r=this.d;0!==n||0!==h?(this.a=e*i+s*h,this.b=e*n+s*r,this.c=-s*i+e*h,this.d=-s*n+e*r):(this.a=e*i,this.b=s*r,this.c=-s*i,this.d=e*r),this._bTransform=!0}clone(){var t=e.create();return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t._bTransform=this._bTransform,t}toString(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty}destroy(){this.recycle()}recycle(){this.identity()}static initialize(){this._pool||(this._pool=this._pool=t.JTPool.instance(e))}static create(){return this._pool.get()}static put(t){this._pool.put(t)}}e.EMPTY=new e,e.TEMP=new e,e._createFun=null,e._pool=null,t.JTMatrix=e}(com||(com={})),function(t){class e{constructor(t=0,e=0){this.x=t,this.y=e}recycle(){return this.x=this.y=0,this}static initialize(){this._pool||(this._pool=this._pool=t.JTPool.instance(e))}static create(){return this._pool.get()}static put(t){this._pool.put(t)}setTo(t,e){return this.x=t,this.y=e,this}distance(t,e){return Math.sqrt((this.x-t)*(this.x-t)+(this.y-e)*(this.y-e))}toString(){return this.x+","+this.y}normalize(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t>0){var e=1/t;this.x*=e,this.y*=e}}copy(t){return this.setTo(t.x,t.y)}}e.TEMP=new e,e.EMPTY=new e,e._pool=null,t.JTPoint=e}(com||(com={})),function(t){class e{constructor(){this._content={},this._protocol=0,this._channel=null}writeProtocol(t){this._protocol=t}write(t,e){this._content[t]=e}get content(){return this._content}get protocol(){return this._protocol}send(){this._channel&&this._channel.send(this._content),e.put(this)}setup(t){this._channel=t}recycle(){this._content={},this._channel=null,this._protocol=0}static initialize(){this._pool||(this._pool=this._pool=t.JTPool.instance(e))}static begin(){var e=this._pool.get();return e.setup(t.JTSession.socketChannel),e}static put(t){this._pool.put(t)}}e._pool=null,t.JTSendPackage=e}(com||(com={})),function(t){class e extends t.JTEventDispatcher{constructor(s=null,i=0,n=null,h=null){super(),this.disableInput=!1,this.protocols=[],this._byteClass=n||t.JTBuffer,this.protocols=h,this.endian=e.BIG_ENDIAN,s&&i>0&&i<65535&&this.connect(s,i)}get input(){return this._input}get output(){return this._output}get connected(){return this._connected}get endian(){return this._endian}set endian(t){this._endian=t,null!=this._input&&(this._input.endian=t),null!=this._output&&(this._output.endian=t)}connect(t,e){var s="ws://"+t+":"+e;this.connectByUrl(s)}connectByUrl(t){null!=this._socket&&this.close(),this._socket&&this.clean(),this.protocols&&0!=this.protocols.length?this._socket=new WebSocket(t,this.protocols):this._socket=new WebSocket(t),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=(t=>{this._onOpen(t)}),this._socket.onmessage=(t=>{this._onMessage(t)}),this._socket.onclose=(t=>{this._onClose(t)}),this._socket.onerror=(t=>{this._onError(t)})}clean(){this.close(),this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null,this.removeAll()}close(){if(null!=this._socket)try{this._socket.close()}catch(t){}}_onOpen(t){this._connected=!0,this.execute(e.OPEN,t)}_onMessage(t){if(t&&t.data){var s=t.data;if(this.disableInput&&s)this.execute(e.MESSAGE,s);else{this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var i=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,s&&("string"==typeof s?this._input.writeUTFBytes(s):this._input.writeArrayBuffer(s),this._addInputPosition=this._input.pos,this._input.pos=i),this.execute(e.MESSAGE,s)}}}_onClose(t){this._connected=!1,this.execute(e.CLOSE,t)}_onError(t){this.execute(e.ERROR,t)}send(t){this._socket.send(t)}flush(){if(this._output&&this._output.length>0){var t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e){t=e}this._output.endian=this.endian,this._output.clear(),t&&this.execute(e.ERROR,t)}}}e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.ERROR="error",t.JTWebSocket=e}(com||(com={})),function(t){t.JTWebSocketChannel=class extends t.JTChannel{constructor(t){super(t),this._connected=!1,this._buffers=null,this._buffers=[]}flush(){let t=this._channel;for(;this._buffers.length;){let e=this._buffers.shift();t&&(t.connected&&t.send(e),this._encoder.writeComplete(e))}}send(e){let s=this._encoder.encode(e),i=this._channel;i?(i.connected&&i.send(s),this._encoder.writeComplete(s)):(this._buffers.push(s),t.JTLogger.info("send error, the websocket cant send msg to server!"))}connect(e,s){super.connect(e,s);var i=this._channel;i?i.clean():i=this._channel=new t.JTWebSocket,i.registerFunction(t.JTWebSocket.OPEN,this.onConnectSucceed,this),i.registerFunction(t.JTWebSocket.MESSAGE,this.onReceiveMessage,this),i.registerFunction(t.JTWebSocket.CLOSE,this.onCloseHandler,this),i.registerFunction(t.JTWebSocket.ERROR,this.onErrorHandler,this),i.connect(e,s)}onConnectSucceed(e){t.JTLogger.info("connect succeed!"),this.flush()}onReceiveMessage(t){let e=this._decoder.decode(t);this._decoder.readComplete(e)}onCloseHandler(e){t.JTLogger.info("the server already close")}onErrorHandler(e){t.JTLogger.info("current connect error")}}}(com||(com={})),function(t){t.JTAbstractDecoderAdapter=class extends t.JTChannelAdapter{constructor(){super()}channelActive(){}}}(com||(com={})),function(t){t.JTDecoderToByteAdapter=class extends t.JTAbstractDecoderAdapter{constructor(){super()}decode(t){return null}readComplete(t){}}}(com||(com={})),function(t){t.JTDecoderToJSONAdapter=class extends t.JTAbstractDecoderAdapter{constructor(){super()}decode(t){}readComplete(t){}}}(com||(com={})),function(t){t.JTAbstractEncoderAdapter=class extends t.JTChannelAdapter{constructor(){super()}}}(com||(com={})),function(t){t.JTEncodeToByteAdapter=class extends t.JTAbstractEncoderAdapter{constructor(){super()}channelActive(){}encode(t){}writeComplete(t){}}}(com||(com={})),function(t){t.JTEncodeToJSONAdapter=class extends t.JTAbstractEncoderAdapter{constructor(){super()}channelActive(){}encode(t){return JSON.stringify(t)}writeComplete(t){}}}(com||(com={})),function(t){t.JTAbstractIdleStateAdapter=class extends t.JTChannelAdapter{constructor(){super()}}}(com||(com={})),function(t){class e{constructor(t){this._cls=null,this._list=null,this._totalCount=0,this._size=0,this._cls=t,this._list=[],this._totalCount=0}get(){return this._size>0?this._list.shift():(this._totalCount++,new this._cls)}put(t){t&&-1==this._list.indexOf(t)&&(t.recycle(),this._list.push(t),this._size++)}get totalCount(){return this._totalCount}get size(){return this._size}static instance(t){var s=this._poolMap[t];return s||(s=this._poolMap[t]=new e(t)),s}}e._poolMap={},t.JTPool=e}(com||(com={})),com||(com={}),function(t){t.JTFixedPool=class extends t.JTPool{constructor(t,e=5){super(t),this._fixedCount=0,this.fixedCount=e}set fixedCount(t){this._fixedCount=t,this.create()}create(){for(var t=this._list,e=0,s=[];t.length;){var i=t.shift();this._fixedCount>e?(s.push(i),e++):i=null}if(this._fixedCount>e){var n=this._fixedCount-e,h=this._cls;t=t.concat(s);for(var r=0;r<n;r++)i=new h,t.push(i)}}get(){return this._size>0?this._list.shift():null}get fullPool(){return this._fixedCount==this._size}}}(com||(com={}));